<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Paul Hegedus" />


<title>Results And Discussion</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">ESA2020-Hegedus</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="introduction.html">Introduction</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Methods
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="methods.html">Overview</a>
    </li>
    <li>
      <a href="data_prep.html">Data Preparation</a>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Field Analysis</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="analysis_sec1east.html">sec1east</a>
        </li>
        <li>
          <a href="analysis_sec1west.html">sec1west</a>
        </li>
        <li>
          <a href="analysis_sec35mid.html">sec35middle</a>
        </li>
        <li>
          <a href="analysis_carlinwest.html">carlinwest</a>
        </li>
        <li>
          <a href="analysis_henrys.html">henrys</a>
        </li>
        <li>
          <a href="analysis_minnies.html">minnies</a>
        </li>
        <li>
          <a href="analysis_sre910.html">sre910</a>
        </li>
        <li>
          <a href="analysis_gramsmoms.html">gramsmoms</a>
        </li>
        <li>
          <a href="analysis_sre1314.html">sre1314</a>
        </li>
      </ul>
    </li>
  </ul>
</li>
<li>
  <a href="resultsNdiscussion.html">Results &amp; Discussion</a>
</li>
<li>
  <a href="references.html">References</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Results And Discussion</h1>
<h4 class="author">Paul Hegedus</h4>

</div>


<p>This page documents the analysis process after sensitivity analysis has been performed in each field. This includes the importing of sensitivity analysis outputs, aggregation into one dataset, and evaluation of patterns between fields and years. Discussion is provided on each result as it pertains to the project.</p>
<pre class="r"><code>library(magrittr)
library(ggplot2) 
source(&quot;R/importCleanSelectFuns.R&quot;)</code></pre>
<div id="import-data" class="section level2">
<h2>Import Data</h2>
<p>For each field that sensitivity analysis was performed, the resulting tables need to be imported and amended with field specific information before combining.</p>
<pre class="r"><code>fields &lt;- c(&quot;carlinwest&quot;, &quot;henrys&quot;, &quot;minnies&quot;,
            &quot;sec1east&quot;, &quot;sec1west&quot;, &quot;sec35mid&quot;,
            &quot;sre1314&quot;) 
fields &lt;- as.list(fields) %&gt;%
  `names&lt;-`(fields)

for (i in 1:length(fields)) {
  fldFiles &lt;- list.files(paste0(&quot;results/&quot;, fields[i]))
  fldFiles &lt;- fldFiles[grep(&quot;sensTableCent&quot;, fldFiles)]
  
  fldList &lt;- rep(list(NA), length(fldFiles))
  yrs &lt;- rep(list(NA), length(fldFiles))
  for (j in 1:length(fldFiles)) {
    yrs[[j]] &lt;- stringr::str_locate(fldFiles[j], &quot;20&quot;)
    yrs[[j]] &lt;- stringr::str_sub(fldFiles[j], yrs[[j]][1,1], yrs[[j]][1,1] + 3)
    fldList[[j]] &lt;- impDat(fldFiles[j], paste0(&quot;results/&quot;, fields[i]))
    fldList[[j]]$year &lt;- yrs[[j]]
  }
  fields[[i]] &lt;- do.call(rbind, fldList)
}
dat &lt;- do.call(rbind, fields)</code></pre>
</div>
<div id="analysis" class="section level2">
<h2>Analysis</h2>
<p>Since we are interested in the most influential parameters on each response variable, we subset out only the most elastic (Elasticity.value == 1) for each field and year and response variable.</p>
<pre class="r"><code>fields &lt;- c(&quot;carlinwest&quot;, &quot;henrys&quot;, &quot;minnies&quot;,
            &quot;sec1east&quot;, &quot;sec1west&quot;, &quot;sec35mid&quot;,
            &quot;sre1314&quot;) 
fields &lt;- as.list(fields) %&gt;%
  `names&lt;-`(fields)

elasticOnes &lt;- subset(dat, dat$Elasticity.value == 1)
elasticOnes$Parameter &lt;- stringr::str_replace(elasticOnes$Parameter, &quot;cent_&quot;, &quot;&quot;)
for (i in 1:length(fields)) {
  fields[[i]] &lt;- subset(elasticOnes, elasticOnes$field == fields[[i]])
}
elasticOnes</code></pre>
<pre><code>##      Parameter Adjustment   MeanResp Sensitivity.value Elasticity.value ResponseVar      field year
##  1:       aa_n         10  38.638547       0.103764531                1         yld carlinwest 2017
##  2:    veg_2py        -10  13.683618       0.002449312                1         pro carlinwest 2017
##  3:       aa_n         10 145.262164       0.168105556                1          NR carlinwest 2017
##  4:       elev        -10  55.119770       0.060877099                1         yld carlinwest 2019
##  5:       elev         10  13.486689       0.008078557                1         pro carlinwest 2019
##  6:       elev        -10 231.644367       0.091062465                1          NR carlinwest 2019
##  7:       elev         10  31.104054       0.685624874                1         yld     henrys 2016
##  8:       elev        -10  11.415882       0.018286916                1         pro     henrys 2016
##  9:       elev         10  79.056817       1.269267285                1          NR     henrys 2016
## 10:       aa_n        -10  52.280021       0.162288106                1         yld     henrys 2018
## 11:       aa_n         10  11.299779       0.068906599                1         pro     henrys 2018
## 12:       aa_n        -10 199.757025       0.321109729                1          NR     henrys 2018
## 13:       aa_n        -10  32.991775       0.092482224                1         yld    minnies 2016
## 14:       aa_n         10   9.667384       0.023428553                1         pro    minnies 2016
## 15:       aa_n        -10  60.151494       0.292086001                1          NR    minnies 2016
## 16: aspect_rad         10  54.147783       0.075221708                1         yld    minnies 2018
## 17:     veg_cy         10  11.891504       0.001706940                1         pro    minnies 2018
## 18: aspect_rad         10 192.977131       0.124968700                1          NR    minnies 2018
## 19:    veg_2py         10  66.215364       0.253427720                1         yld   sec1east 2017
## 20:       elev         10   9.935000       0.028790520                1         pro   sec1east 2017
## 21:    veg_2py         10 229.296178       0.355748752                1          NR   sec1east 2017
## 22:     veg_py         10  81.184770       0.072249438                1         yld   sec1east 2019
## 23: aspect_rad         10  11.925378       0.017572969                1         pro   sec1east 2019
## 24:     veg_py         10 339.389305       0.103834873                1          NR   sec1east 2019
## 25:     veg_cy         10  35.895898       0.075201010                1         yld   sec1west 2016
## 26:       elev        -10  13.669906       0.049666921                1         pro   sec1west 2016
## 27:       elev        -10 128.474862       0.170102714                1          NR   sec1west 2016
## 28:       elev        -10  72.554077       0.110005367                1         yld   sec1west 2019
## 29:       elev         10  13.098933       0.023250787                1         pro   sec1west 2019
## 30:       elev        -10 314.768323       0.145884644                1          NR   sec1west 2019
## 31:    veg_2py         10  46.838817       0.085975882                1         yld   sec35mid 2016
## 32:       elev        -10  12.620800       0.053540252                1         pro   sec35mid 2016
## 33:       elev         10 197.462275       0.208891720                1          NR   sec35mid 2016
## 34:       aa_n        -10  67.215069       0.451513373                1         yld   sec35mid 2018
## 35:       elev         10  12.310064       0.024413807                1         pro   sec35mid 2018
## 36:       aa_n        -10 289.218414       0.593732231                1          NR   sec35mid 2018
## 37:       elev         10  50.657930       0.117715203                1         yld    sre1314 2016
## 38:       elev         10  13.342628       0.032600819                1         pro    sre1314 2016
## 39:       elev         10 232.751195       0.167324625                1          NR    sre1314 2016
## 40:    veg_2py         10  50.010474       0.372942957                1         yld    sre1314 2018
## 41:       elev        -10  10.910074       0.024391244                1         pro    sre1314 2018
## 42:    veg_2py         10 181.676236       0.599689458                1          NR    sre1314 2018
##      Parameter Adjustment   MeanResp Sensitivity.value Elasticity.value ResponseVar      field year</code></pre>
<p>Below, a barplot of most influential parameter across all fields and years and responses is shown. ‘aa_n’ = As-applied nitrogen fertilizer (lbs N/acre), ‘aspect_rad’ = aspect in radians, ‘elev’ = elevation in meters, ‘veg_2py’ = NDVI for January 1st - December 31st from two years prior, ‘veg_cy’ = NDVI from January 1st - March 30th of the year of harvest, and ‘veg_py’ = NDVI for January 1st - December 31st from the previous year.</p>
<pre class="r"><code>ggplot(elasticOnes) +
  geom_bar( aes(Parameter, fill = ResponseVar)) +
  theme_bw() + 
  scale_y_continuous(name = &quot;Frequency&quot;, limits = c(0, 20)) +
  scale_fill_manual(name = &quot;Respone Variable&quot;, 
                    labels = c(&quot;Net-Return&quot;, &quot;Yield&quot;, &quot;Protein&quot;), 
                    values = c(&quot;#7CAE00&quot;, &quot;#F8666D&quot;, &quot;#00BFC4&quot;)) +
  ggtitle(&quot;Most Elastic Parameter&quot;,
          subtitle = &quot;n = 42&quot;)</code></pre>
<p><img src="resultsNdiscussion_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>ggsave(plot = last_plot(),
       filename = paste0(&quot;results/elasticParms.png&quot;),
       width = 7.5, height = 7.5, units = &quot;in&quot;)</code></pre>
</div>
<div id="results-discussion" class="section level2">
<h2>Results &amp; Discussion</h2>
<p>Results in the following paragraph relate to the barplot above. The most common parameter that had the largest influence on any of the response variables was elevation, followed by as-applied nitrogen. Elevation was the most influential parameter for both net-return and yield across all fields and years, however elevation and nitrogen fertilzier were equally influential on protein. This indicates that although fertilizer is the input that farmers have the most control over and is, of course, a plant macronutrient, is not the biggest driver of yield, protein, and net-return in all cases. Vegetation indices (NDVI) from previous years also had an influence on responses, albeit in less instances. The amount of ‘greenness’ reflected by a crop, measured as NDVI, relates to the productivity of the plant in that timeframe, so these results indicate that the amount of crop productivity in previous years is having an influence on the productivity and quality of the crop in the current year.</p>
<p>The rest of these results reference the table of the most elastic parameters above. For a given field and year combination, the most elastic parameter was the same for yield, protein, and net-return in 6 out of 14 instances. This shows that about half the time, the same driver is the most influential on each response, a result that is not entirely surprising due to the relationship between yield, protein, and net-return. However, as this instance only occurs half the time, this indicates that not only is there field and time specificity, there is specificity in management for different responses, even in the same field and year.</p>
<p>Related, and of note, is that in 12 out of 14 instances, the most elastic covariate for yield and net-return were the same. This highlights the tight relationship between yield and net-return, which was also seen in the correlation matrices of each field and year, where <span class="math inline">\(R^2\)</span> values were observed in the range of 0.9 to 0.95 between yield and net-return. However, the caveat must be stated that farmers do not know the price they will receive in the upcoming year, and that this is a source of uncertainty in net-return not addressed in this work.</p>
<p>When comparing the same response variable in the same field across years, it was observed that the same covariate had the most influence on the response variable in both years in 5 out of 21 cases. This shows that there</p>
</div>
<div id="conclusions" class="section level2">
<h2>Conclusions</h2>
<p>Understanding the primary sources of field-specific variation in production and quality across the field and over time enables producers to identify if, when, and where nitrogen fertilizer should be applied. Equally important, the spatial and temporal resolution at which variability in agroecosystem performance can be detected creates a mechanism to monitor and ground-truth ecosystem response to global change.</p>
<p>This project demonstrates the importance of field specificity in management of small grain agroecosystems in Montana. In ~50% of cases, the same covariate was the most influential on yield, protein, and net-return, otherwise, different factors driving each response, meaning that different drivers for different response variables even in the same field and year. Even in fields bordering each other, different covariates had the most influence on each response variable in each year (i.e. sec1east &amp; sec1west), indicating that there are different drivers for responses across fields in the same year (even on same farm). In ~25% of cases, the same covariate was the most elastic across years, ~75% of the time, different covariate was most influential on the response in the same field in different years, meaning that different drivers most influential on responses across years in the same field.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
